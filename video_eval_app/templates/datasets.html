{% extends "base.html" %}

{% block content %}
  <h1>Datasets</h1>

  {% include '_paginator.html' %}

  <table class="table">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Name</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for dataset in page %}
        <tr>
          <th scope="row">{{ dataset.id }}</th>
          <td><a href="{% url 'dataset_projects' dataset.id %}">{{ dataset.name }}</a></td>
          <td>
            {% if dataset.id in manage_dataset_ids %}
              {% if dataset.is_cut %}
                {% if dataset.has_nonowned_files_for_user %}
                <a href="{% url 'delete_dataset' dataset.id %}" class="btn btn-warning btn-sm">
                  <i class="fa fa-users"></i> Delete
                </a>
                {% else %}
                <a href="{% url 'delete_dataset' dataset.id %}" class="btn btn-danger btn-sm">
                  <i class="fa fa-trash"></i> Delete
                </a>
                {% endif %}
              {% else %}
                <span class="btn btn-secondary btn-sm" disabled>
                  <i class="fa fa-spinner fa-spin"></i> Processing...
                </span>
              {% endif %}
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  {% include '_paginator.html' %}
{% endblock %}
{# vim: set ft=htmldjango: #}
